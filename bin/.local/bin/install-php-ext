#!/usr/bin/env bash
export LDFLAGS="$LDFLAGS"
export CPPFLAGS="$CPPFLAGS"

formulae=(
  autoconf
  automake
  bison
  freetype
  gd
  gettext
  icu4c
  krb5
  libedit
  libiconv
  libjpeg
  libpng
  libxml2
  libzip
  openssl@1.1
  pkg-config
  re2c
  zlib 
  libmemcached
)

# Add bin paths to PATH, and lib/include to LDFLAGS/CPPFLAGS
for formula in "${formulae[@]}"; do
  prefix=$(brew --prefix "$formula" 2>/dev/null)
  if [[ -d "$prefix" ]]; then
    [[ -d "$prefix/bin" ]] && export PATH="$prefix/bin:$PATH"
    [[ -d "$prefix/sbin" ]] && export PATH="$prefix/sbin:$PATH"
    [[ -d "$prefix/lib" ]] && export LDFLAGS="-L$prefix/lib $LDFLAGS"
    [[ -d "$prefix/include" ]] && export CPPFLAGS="-I$prefix/include $CPPFLAGS"
  fi
done
